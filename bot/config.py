from datetime import datetime

import telebot
from telebot import apihelper

from environs import Env

env = Env()
env.read_env()

TOKEN = env.str('TOKEN')
GROUP_ID = env.int('GROUP_ID')
API_WEATHER = env.str('API_WEATHER')
CITY = env.str('CITY')
WEATHER_TIME = env.str('WEATHER_TIME')
SCHEDULE_TIME = env.str('SCHEDULE_TIME')
CABINETS_CLEAR_TIME = env.str('CABINETS_CLEAR_TIME')

START_LESSONS = datetime(2024, 2, 12)

ADMIN_ID = env.int('ADMIN_ID')

bot = telebot.TeleBot(TOKEN, use_class_middlewares=True)
apihelper.ENABLE_MIDDLEWARE = True

cabinets_info = {"cabinets": [], "author": {}}

days = {
    0: "–ø–Ω",
    1: "–≤—Ç",
    2: "—Å—Ä",
    3: "—á—Ç",
    4: "–ø—Ç",
    5: "—Å–±",
    "–ø–Ω": 0,
    "–≤—Ç": 1,
    "—Å—Ä": 2,
    "—á—Ç": 3,
    "–ø—Ç": 4,
    "—Å–±": 5,
}

define_week = {
    0: "ü´® –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
    1: "‚òïÔ∏è –í—Ç–æ—Ä–Ω–∏–∫",
    2: "ü™© –°—Ä–µ–¥–∞",
    3: "üåü –ß–µ—Ç–≤–µ—Ä–≥",
    4: "üçª –ü—è—Ç–Ω–∏—Ü–∞",
    5: "üõå –°—É–±–±–æ—Ç–∞"
}

define_time = {
    0: "8:00",
    1: "9:35",
    2: "11:10",
    3: "13:00",
    4: "14:20"
}

pages = {
    "home":
        {
            0: f"<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç–∞ <em>208itc</em>!</b>"
               f"\n<em>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç 208 –≥—Ä—É–ø–ø—ã –§–ö–∏–°–ö–î –ë–ì–£–ö–ò</em>\n",

            1: f"\n<b>‚ÑπÔ∏è–ß—Ç–æ –±–æ—Ç —É–º–µ–µ—Ç?</b>\n"
               f"\n- <em>–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</em>"
               f"\n- <em>–ó–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏ –ø—Ä–∏—Å—ã–ª–∞—Ç—å –∫–∞–±–∏–Ω–µ—Ç—ã</em>"
               f"\n- <em>–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</em>"
               f"\n- <em>–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–≥–æ–¥—É —Å —É—Ç—Ä–∞</em>"
               f"\n- <em>–∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ..</em>"
        },

    "help": f"‚öôÔ∏è<b>–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</b>"
            f"\n\n<blockquote><b>–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</b>\n/schedule –∏–ª–∏ /s</blockquote>"
            f"\n- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç <em>|–Ω–µ–¥–µ–ª—è| |–¥–µ–Ω—å|</em> –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ"
            f"\n- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏ —Ç–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—é"
            f"\n- –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/schedule 12 –ø–Ω</code>"
            f"\n\n<blockquote><b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞–º–∏</b>\n/cabinets –∏–ª–∏ /c –∏–ª–∏ <u>–∫–∞–±</u></blockquote>"
            f"\n- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç <em>|–∫–∞–±–∏–Ω–µ—Ç| |–∫–∞–±–∏–Ω–µ—Ç|</em>.."
            f"\n- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–±–∏–Ω–µ—Ç–æ–≤ : 4"
            f"\n- –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–ø–∏—Å–æ–∫ –∫–∞–±–∏–Ω–µ—Ç–æ–≤"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/cabinets 508 800–∞</code>"
            f"\n\n<blockquote><b>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</b>\n/add</blockquote>"
            f"\n- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç <em>|–ø–µ—Ä–∏–æ–¥ –∏–ª–∏ –Ω–µ–¥–µ–ª—è| |–¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏| |–Ω–æ–º–µ—Ä –ø–∞—Ä—ã| |–Ω–∞–∑–≤–∞–Ω–∏–µ_–ø–∞—Ä—ã|</em>.."
            f"\n- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ <em>|—Ç–∏–ø –ø–∞—Ä—ã| |–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å| </em>"
            f"\n- –î–æ—Å—Ç—É–ø –∏–º–µ—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/add 2-14 —Å—Ä 4 –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è_–≥—Ä–∞—Ñ–∏–∫–∞ —Å–µ–º. –ò–≤–∞–Ω–æ–≤</code>"
            f"\n\n<blockquote><b>–£–∑–Ω–∞—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</b>\n/teacher –∏–ª–∏ /t</blockquote>"
            f"\n- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç <em>|–ø—Ä–µ–¥–º–µ—Ç|</em> –∏–ª–∏ <em>|—Ñ–∞–º–∏–ª–∏—è|</em>"
            f"\n- –ü–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/teacher —á—Ç</code>"
            f"\n\n<blockquote><b>–ü–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É</b>\n/weather –∏–ª–∏ /w</blockquote>"
            f"\n- –û—Ç–ø—Ä–∞–≤–∏—Ç –ø–æ–≥–æ–¥—É –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –≥–æ—Ä–æ–¥–µ –ú–∏–Ω—Å–∫"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/weather</code>"
            f"\n\n<blockquote><b>–°–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç</b>\n/random –∏–ª–∏ /r</blockquote>"
            f"\n- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç <em>|—ç–ª–µ–º–µ–Ω—Ç1| |—ç–ª–µ–º–µ–Ω—Ç2|</em>.."
            f"\n- –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–µ—Ä–µ—Ç –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç"
            f"\n- –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ–º–∏–Ω–∞—Ä–æ–≤"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/random @naitmag @BotFather</code>"
            f"\n\n<blockquote><b>–í–∞—à ID</b>\n/id</blockquote>"
            f"\n- –û—Ç–ø—Ä–∞–≤–∏—Ç –≤–∞—à ID –≤ Telegram"
            f"\n- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∞–≤"
            f"\n- –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ç–µ—Ö. —á–∞—Å—Ç–∏ –±–æ—Ç–∞"
            f"\n- <b>–ü—Ä–∏–º–µ—Ä:</b> <code>/id</code>",

    "contacts": f"üìá<b>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</b>\n"
                f"\nüì∑ <i><b>–ò–Ω—Å—Ç–∞–≥—Ä–∞–º</b></i>"
                f"\n- <a href='https://www.instagram.com/itinculture/'>–ö–∞—Ñ–µ–¥—Ä–∞ –ò–¢–ö</a>"
                f"\n- <a href='https://www.instagram.com/208itk'>–ì—Ä—É–ø–ø–∞ 208</a>"
                f"\n\nüë§ <i><b>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</b></i>:"
                f"\n- <a href='https://t.me/naitmag'>–°–æ–∑–¥–∞—Ç–µ–ª—å –±–æ—Ç–∞</a>"

}
